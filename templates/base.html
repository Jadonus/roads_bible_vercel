
{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>

<meta name="apple-mobile-web-app-capable" content="yes">
    {% load pwa %}
{% progressive_web_app_meta %}

  <link rel="icon" href="{% static 'icons/favicon.ico' %}">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>{% block title %}Roads{% endblock %}</title>
  <link rel="stylesheet" href="">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  </head>
<body>
  {% block content %}

  {% endblock %}

<div class="toast align-items-center" id="pwa-installation-popup" role="alert" aria-live="assertive" aria-atomic="true" style="display::none">
  <div class="d-flex">
    <div class="toast-body">
   Install Roads as a web app! If on Safari, press the share button, then press add to home screen. 
   </div>
    <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
</div><style>
html {
 overflow-y: visible;
overflow-x: clip;
}
    </style>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
<script>
  function isIOS() {
    // Check if the user agent contains 'iPhone' or 'iPad'
    return /iPhone|iPad|iPod/i.test(navigator.userAgent);
  }

  function isInStandaloneMode() {
    // Check if the PWA is running in standalone mode on iOS
    return window.matchMedia('(display-mode: standalone)').matches;
  }

  function showInstallPopup() {
    const popup = document.getElementById('pwa-installation-popup');

    // Show the popup
    popup.style.display = 'block';

      // Logic to prompt the user to install the PWA
      // You can use the 'beforeinstallprompt' event for this, but remember it only works once per user gesture
      // To keep this example simple, we're not implementing the installation logic here.

      // Close the popup after installation prompt
      popup.style.display = 'none';
    });


  // Check if the user is on iOS and not in standalone mode, then show the PWA installation popup
  if (isIOS() && !isInStandaloneMode()) {
    showInstallPopup();
  }
</script>
</html>


